# WaveSpeed Mobile

WaveSpeed Mobile 是 [WaveSpeed AI](https://wavespeed.ai) 的官方 Android 移动客户端，基于 React + Capacitor 构建，与桌面端共享约 70% 代码，同时针对移动端进行了深度优化。

## 版本信息

- **当前版本**: 0.8.1
- **包名**: `ai.wavespeed.mobile`
- **最低支持**: Android 5.0 (API 21)

## 功能介绍

### 核心功能

#### 1. 模型浏览 (Models)
- 浏览所有可用的 WaveSpeed AI 模型
- 支持搜索和筛选
- 点击模型直接进入 Playground 使用

#### 2. AI 创作工坊 (Playground)
- **输入/输出双视图**: 移动端特有的标签切换设计，充分利用屏幕空间
- **动态表单**: 根据模型 Schema 自动生成参数表单
- **支持的输入类型**:
  - 文本输入（含 AI 提示词优化）
  - 滑块调节
  - 下拉选择
  - 开关切换
  - 文件上传（图片/视频/音频）
  - LoRA 选择器
  - 尺寸选择器
  - 遮罩编辑器
- **实时定价**: 显示预估费用
- **自动切换**: 生成完成后自动跳转到输出视图

#### 3. 模板管理 (Templates)
- 保存常用参数配置为模板
- 支持模板重命名
- 批量导出/导入模板（JSON 格式）
- 按模型分组浏览
- 一键应用模板到 Playground

#### 4. 历史记录 (History)
- 网格视图展示历史生成记录
- 支持状态筛选：全部、已完成、失败、已归档
- 长按进入批量选择模式
- 批量删除和批量下载
- 缩略图预览（图片/视频/音频/JSON/文本）
- 查看详细信息
- 保存为模板功能
- 本地输入参数缓存（带书签图标的记录可保存为模板）

#### 5. 设置 (Settings)
- API 密钥管理
- 账户余额查询
- 主题切换（自动/深色/浅色）
- 语言选择（支持 18 种语言）
- 自动保存设置

### 免费工具 (Free Tools)

无需 API 密钥即可使用的本地 AI 工具：

#### 1. 视频增强 (Video Enhancer)
- 逐帧 AI 超分辨率放大
- 支持 2x-4x 放大倍数
- 三种质量选项（快速/平衡/高质量）
- 实时进度和预估剩余时间
- 输出 WebM 格式（30 FPS）

#### 2. 图片增强 (Image Enhancer)
- AI 图片超分辨率
- 支持 2x-4x 放大
- ESRGAN 模型（slim/medium/thick）
- 下载 PNG/WebP 格式

#### 3. 背景移除 (Background Remover)
- AI 自动识别并移除背景
- 同时输出三种结果：
  - 前景（透明背景）
  - 背景（主体被移除）
  - 遮罩（灰度分割图）
- 自动检测 GPU 加速

#### 4. 图片擦除 (Image Eraser)
- 涂抹移除图片中的物体
- LaMa 修复模型
- 画笔/橡皮/填充工具
- 撤销/重做支持
- 智能裁剪优化大图处理

#### 5. 智能抠图 (Segment Anything)
- 点击选择要分割的物体
- 长按标记要排除的区域
- 实时预览分割效果
- 羽化边缘处理
- 支持多种下载格式

#### 6. 视频转换 (Video Converter)
- 视频格式转换
- 支持 WebM (VP8/VP9/AV1) 和 MP4 (H.264)
- 自动编解码器检测
- 进度显示

## 使用指南

### 安装应用

1. 下载 APK 文件
2. 在手机上打开文件
3. 如提示"未知来源"，请在设置中允许安装
4. 安装完成后打开应用

### 首次使用

1. **获取 API 密钥**
   - 访问 [WaveSpeed AI](https://wavespeed.ai) 注册账号
   - 在用户中心获取 API 密钥

2. **登录应用**
   - 打开应用，在登录页面输入 API 密钥
   - 点击"验证"按钮
   - 验证成功后自动进入主界面

3. **使用 Playground**
   - 在模型页面选择一个模型
   - 在输入视图配置参数
   - 点击"运行"按钮开始生成
   - 生成完成后自动切换到输出视图

### 模板使用

1. **保存模板**
   - 在 Playground 配置好参数后
   - 点击"保存为模板"按钮
   - 输入模板名称并保存

2. **使用模板**
   - 进入模板页面
   - 点击想要使用的模板
   - 自动跳转到 Playground 并加载参数

3. **导出/导入**
   - 点击页面顶部的导出按钮
   - 选择导出单个或全部模板
   - 导入时可选择合并或替换

### 免费工具使用

1. 点击主界面右上角的工具图标
2. 选择需要的工具
3. 上传或选择文件
4. 等待处理完成
5. 下载或保存结果

## 注意事项

### 性能相关

1. **首次使用 AI 工具较慢**
   - 免费工具首次使用需要下载模型
   - 模型会缓存到本地，后续使用更快
   - 建议在 Wi-Fi 环境下首次使用

2. **内存占用**
   - AI 工具运行时内存占用较高
   - 建议关闭其他应用以保证流畅
   - 处理大文件时可能需要更多时间

3. **GPU 加速**
   - 部分工具支持 WebGPU 加速
   - 不支持时会自动回退到 CPU 处理
   - CPU 模式下处理速度会较慢

### 网络相关

1. **API 调用需要网络**
   - Playground 生成需要稳定的网络连接
   - 建议在 Wi-Fi 环境下使用
   - 大文件上传可能需要较长时间

2. **免费工具离线可用**
   - 模型下载后可离线使用
   - 无需 API 密钥和网络连接

### 数据存储

1. **本地存储**
   - 模板保存在本地存储
   - 历史记录的输入参数会本地缓存
   - 清除应用数据会丢失这些信息

2. **自动归档**
   - 超过 7 天的本地记录会自动归档
   - 归档记录可在历史页面筛选查看
   - 最多保留 10,000 条记录

### 已知限制

1. **视频处理**
   - 视频增强处理时间较长
   - 建议处理短视频（< 30 秒）
   - 输出固定为 30 FPS

2. **图片尺寸**
   - 部分工具对图片尺寸有限制
   - 过大的图片会自动缩放处理
   - 建议使用 4K 以下分辨率

## 与桌面端的区别

| 功能 | 桌面端 | 移动端 |
|------|--------|--------|
| 运行框架 | Electron | Capacitor (Android) |
| 导航方式 | 侧边栏 | 底部导航栏 |
| Playground | 多标签页 | 单页 + 输入/输出切换 |
| 免费工具 | 路由切换 | 持久化渲染 |
| 文件存储 | electron-store | Capacitor Preferences |
| 拖放上传 | 完整支持 | 文件选择器 |
| 视频转换 | 无 | 有（新功能） |
| 资源管理 | 完整资源页 | 简化版 |
| 历史输入 | 仅 API | API + 本地缓存 |

### 移动端特有功能

1. **输入/输出视图切换** - 更好地利用手机屏幕
2. **长按选择模式** - 历史记录长按进入批量选择
3. **本地输入缓存** - 历史记录可追溯输入参数
4. **视频转换工具** - 支持格式转换
5. **持久化免费工具** - 切换页面不会丢失状态
6. **批量下载** - 选择多个历史记录一键下载

### 桌面端特有功能

1. **多标签 Playground** - 同时处理多个任务
2. **完整资源管理** - 管理已保存的生成结果
3. **拖放文件上传** - 更便捷的文件操作
4. **自动更新** - 内置更新检查

## 开发相关

### 技术栈

- **前端框架**: React 18 + TypeScript
- **移动框架**: Capacitor 6.2
- **UI 组件**: shadcn/ui + Tailwind CSS
- **状态管理**: Zustand
- **构建工具**: Vite
- **AI 推理**: ONNX Runtime, TensorFlow.js

### 开发命令

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 同步到 Android
npx cap sync android

# 打开 Android Studio
npx cap open android

# 构建 Debug APK
npm run android:build:debug

# 构建 Release APK
npm run android:build:release
```

### 项目结构

```
mobile/
├── src/
│   ├── components/      # 移动端专用组件
│   ├── pages/           # 移动端页面
│   ├── stores/          # 移动端状态管理
│   ├── platform/        # Capacitor 平台服务
│   └── App.tsx          # 路由配置
├── android/             # Android 原生项目
├── capacitor.config.ts  # Capacitor 配置
├── vite.config.ts       # Vite 配置
└── package.json         # 依赖配置
```

### 代码共享

移动端通过 Vite 路径别名与桌面端共享代码：
- `@/` - 共享代码（父级 src/）
- `@mobile/` - 移动端专用代码

## 支持与反馈

- **官网**: [wavespeed.ai](https://wavespeed.ai)
- **问题反馈**: [GitHub Issues](https://github.com/WaveSpeedAI/wavespeed-desktop/issues)
- **API 文档**: [wavespeed.ai/docs](https://wavespeed.ai/docs)

## 更新日志

### v0.8.1
- 新增历史记录删除功能（单个/批量）
- 新增长按选择模式
- 新增批量下载功能
- 修复 Slider 触摸滑动问题
- 优化 Batch Mode 重置逻辑
- 移除无用的历史状态筛选项

### v0.8.0
- 新增视频转换工具
- 新增历史记录归档功能
- 优化智能抠图交互（长按排除）
- 本地输入参数缓存
- 多项性能优化和 Bug 修复
